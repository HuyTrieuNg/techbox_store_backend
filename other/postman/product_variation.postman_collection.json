{
  "info": {
    "_postman_id": "product-variation-api",
    "name": "TechBox Store - Product Variation API (16 Endpoints)",
    "description": "Complete API collection for Product Variation management with image upload support",
    "schema": "https://schema.getpostman.com/json/collection/v2.1.0/collection.json",
    "_exporter_id": "techbox-store-product-variation"
  },
  "item": [
    {
      "name": "ðŸ”§ Product Variation Management (16 Endpoints)",
      "item": [
        {
          "name": "1. GET All Product Variations",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/api/product-variations?includeDeleted=false",
              "host": ["{{baseUrl}}"],
              "path": ["api", "product-variations"],
              "query": [
                {"key": "includeDeleted", "value": "false"}
              ]
            }
          }
        },
        {
          "name": "2. GET Product Variation by ID",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/api/product-variations/{{productVariationId}}?includeDeleted=false",
              "host": ["{{baseUrl}}"],
              "path": ["api", "product-variations", "{{productVariationId}}"],
              "query": [
                {"key": "includeDeleted", "value": "false"}
              ]
            }
          }
        },
        {
          "name": "3. CREATE Product Variation (with Images)",
          "event": [
            {
              "listen": "test",
              "script": {
                "type": "text/javascript",
                "exec": [
                  "if (pm.response.code === 201) {",
                  "    const responseJson = pm.response.json();",
                  "    if (responseJson && responseJson.id) {",
                  "        pm.environment.set('productVariationId', responseJson.id);",
                  "        pm.environment.set('productVariationSku', responseJson.sku);",
                  "    }",
                  "}"
                ]
              }
            }
          ],
          "request": {
            "method": "POST",
            "header": [],
            "body": {
              "mode": "formdata",
              "formdata": [
                {"key": "variationName", "value": "iPhone 15 Pro Max 256GB Natural Titanium", "type": "text"},
                {"key": "productId", "value": "{{productId}}", "type": "text"},
                {"key": "price", "value": "34990000", "type": "text"},
                {"key": "sku", "value": "IP15PM-256-NT", "type": "text"},
                {"key": "quantity", "value": "50", "type": "text"},
                {"key": "images", "src": "", "type": "file"},
                {"key": "images", "src": "", "type": "file"}
              ]
            },
            "url": {
              "raw": "{{baseUrl}}/api/product-variations",
              "host": ["{{baseUrl}}"],
              "path": ["api", "product-variations"]
            }
          }
        },
        {
          "name": "4. UPDATE Product Variation (with Images)",
          "request": {
            "method": "PUT",
            "header": [],
            "body": {
              "mode": "formdata",
              "formdata": [
                {"key": "variationName", "value": "iPhone 15 Pro Max 256GB Natural Titanium - Updated", "type": "text"},
                {"key": "price", "value": "33990000", "type": "text"},
                {"key": "sku", "value": "IP15PM-256-NT-V2", "type": "text"},
                {"key": "quantity", "value": "45", "type": "text"},
                {"key": "newImages", "src": "", "type": "file"},
                {"key": "deleteImageIds", "value": "old_image_public_id_1", "type": "text"},
                {"key": "deleteImageIds", "value": "old_image_public_id_2", "type": "text"}
              ]
            },
            "url": {
              "raw": "{{baseUrl}}/api/product-variations/{{productVariationId}}",
              "host": ["{{baseUrl}}"],
              "path": ["api", "product-variations", "{{productVariationId}}"]
            }
          }
        },
        {
          "name": "5. DELETE Product Variation (Soft Delete)",
          "request": {
            "method": "DELETE",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/api/product-variations/{{productVariationId}}",
              "host": ["{{baseUrl}}"],
              "path": ["api", "product-variations", "{{productVariationId}}"]
            }
          }
        },
        {
          "name": "6. RESTORE Product Variation",
          "request": {
            "method": "PATCH",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/api/product-variations/{{productVariationId}}/restore",
              "host": ["{{baseUrl}}"],
              "path": ["api", "product-variations", "{{productVariationId}}", "restore"]
            }
          }
        },
        {
          "name": "7. GET Variations by Product ID",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/api/product-variations/product/{{productId}}",
              "host": ["{{baseUrl}}"],
              "path": ["api", "product-variations", "product", "{{productId}}"]
            }
          }
        },
        {
          "name": "8. GET In-Stock Variations",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/api/product-variations/in-stock?productId={{productId}}",
              "host": ["{{baseUrl}}"],
              "path": ["api", "product-variations", "in-stock"],
              "query": [
                {"key": "productId", "value": "{{productId}}"}
              ]
            }
          }
        },
        {
          "name": "9. GET All In-Stock Variations",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/api/product-variations/in-stock",
              "host": ["{{baseUrl}}"],
              "path": ["api", "product-variations", "in-stock"]
            }
          }
        },
        {
          "name": "10. GET Low-Stock Variations",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/api/product-variations/low-stock?threshold=10",
              "host": ["{{baseUrl}}"],
              "path": ["api", "product-variations", "low-stock"],
              "query": [
                {"key": "threshold", "value": "10"}
              ]
            }
          }
        },
        {
          "name": "11. GET Variation by SKU",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/api/product-variations/sku/{{productVariationSku}}",
              "host": ["{{baseUrl}}"],
              "path": ["api", "product-variations", "sku", "{{productVariationSku}}"]
            }
          }
        },
        {
          "name": "12. UPDATE Stock Quantity",
          "request": {
            "method": "PATCH",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/api/product-variations/{{productVariationId}}/stock?quantity=100",
              "host": ["{{baseUrl}}"],
              "path": ["api", "product-variations", "{{productVariationId}}", "stock"],
              "query": [
                {"key": "quantity", "value": "100"}
              ]
            }
          }
        },
        {
          "name": "13. CHECK SKU Exists (New)",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/api/product-variations/exists?sku=IP15PM-256-NT",
              "host": ["{{baseUrl}}"],
              "path": ["api", "product-variations", "exists"],
              "query": [
                {"key": "sku", "value": "IP15PM-256-NT"}
              ]
            }
          }
        },
        {
          "name": "14. CHECK SKU Exists (Update)",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/api/product-variations/exists?sku=IP15PM-256-NT&excludeId={{productVariationId}}",
              "host": ["{{baseUrl}}"],
              "path": ["api", "product-variations", "exists"],
              "query": [
                {"key": "sku", "value": "IP15PM-256-NT"},
                {"key": "excludeId", "value": "{{productVariationId}}"}
              ]
            }
          }
        },
        {
          "name": "15. CREATE Product Variation (Minimal)",
          "request": {
            "method": "POST",
            "header": [],
            "body": {
              "mode": "formdata",
              "formdata": [
                {"key": "productId", "value": "{{productId}}", "type": "text"},
                {"key": "price", "value": "29990000", "type": "text"},
                {"key": "quantity", "value": "30", "type": "text"}
              ]
            },
            "url": {
              "raw": "{{baseUrl}}/api/product-variations",
              "host": ["{{baseUrl}}"],
              "path": ["api", "product-variations"]
            }
          }
        },
        {
          "name": "16. UPDATE Product Variation (Minimal)",
          "request": {
            "method": "PUT",
            "header": [],
            "body": {
              "mode": "formdata",
              "formdata": [
                {"key": "price", "value": "28990000", "type": "text"},
                {"key": "quantity", "value": "25", "type": "text"}
              ]
            },
            "url": {
              "raw": "{{baseUrl}}/api/product-variations/{{productVariationId}}",
              "host": ["{{baseUrl}}"],
              "path": ["api", "product-variations", "{{productVariationId}}"]
            }
          }
        }
      ]
    }
  ],
  "event": [
    {
      "listen": "prerequest",
      "script": {
        "type": "text/javascript",
        "exec": [
          "// Set default values if not already set",
          "if (!pm.environment.get('baseUrl')) pm.environment.set('baseUrl', 'http://localhost:8080');",
          "if (!pm.environment.get('productId')) pm.environment.set('productId', '1');",
          "if (!pm.environment.get('productVariationId')) pm.environment.set('productVariationId', '1');",
          "if (!pm.environment.get('productVariationSku')) pm.environment.set('productVariationSku', 'IP15PM-256-NT');"
        ]
      }
    }
  ],
  "variable": [
    {
      "key": "baseUrl",
      "value": "http://localhost:8080",
      "type": "string"
    },
    {
      "key": "productId", 
      "value": "1",
      "type": "string"
    },
    {
      "key": "productVariationId",
      "value": "1", 
      "type": "string"
    },
    {
      "key": "productVariationSku",
      "value": "IP15PM-256-NT",
      "type": "string"
    }
  ]
}